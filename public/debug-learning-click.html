<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习页面点击调试</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(45deg, #3b82f6, #1e40af, #8b5cf6, #6366f1);
            min-height: 100vh;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // 使用真实的学习文章数据
        const learningPosts = [
            {
                "id": 1754624799800,
                "title": "测试学习点击卡片",
                "content": "学习\n1、点击\n2、响应\n3、出现文章详情",
                "category": "学习",
                "tags": ["学习"],
                "summary": "用来测试点击卡片",
                "createdAt": "2025-08-08T03:46:39.800Z",
                "updatedAt": "2025-08-08T03:46:39.800Z",
                "readTime": "1分钟"
            }
        ];

        // PostCard组件 - 与public版本完全一致
        function PostCard({ post, onClick, showActions = false, onEdit, onDelete }) {
            const formatDate = (dateString) => {
                return new Date(dateString).toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            };

            const getCategoryColor = (category) => {
                const colors = {
                    '学习': 'from-blue-500 to-purple-600',
                    '健身': 'from-green-500 to-teal-600',
                    '生活': 'from-pink-500 to-rose-600',
                    '摄影': 'from-yellow-500 to-orange-600'
                };
                return colors[category] || 'from-gray-500 to-gray-600';
            };

            const handleClick = (e) => {
                console.log('PostCard clicked, post:', post);
                console.log('onClick function:', onClick);
                if (onClick) {
                    onClick(e);
                } else {
                    console.error('onClick is not defined');
                }
            };

            return (
                <div 
                    className="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300 transform hover:scale-105 cursor-pointer group"
                    onClick={handleClick}
                >
                    <div>
                        {/* 分类标签 */}
                        <div className="flex items-center justify-between mb-4">
                            <span className={`px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r ${getCategoryColor(post.category)} text-white`}>
                                {post.category}
                            </span>
                            <span className="text-white/60 text-sm">{post.readTime}</span>
                        </div>

                        {/* 标题 */}
                        <h3 className="text-xl font-bold text-white mb-3 group-hover:text-purple-300 transition-colors">
                            {post.title}
                        </h3>

                        {/* 摘要 */}
                        <p className="text-white/80 mb-4 line-clamp-3">
                            {post.summary}
                        </p>

                        {/* 标签 */}
                        <div className="flex flex-wrap gap-2 mb-4">
                            {post.tags.slice(0, 3).map(tag => (
                                <span key={tag} className="px-2 py-1 bg-white/20 rounded-md text-xs text-white/90">
                                    {tag}
                                </span>
                            ))}
                            {post.tags.length > 3 && (
                                <span className="px-2 py-1 bg-white/20 rounded-md text-xs text-white/70">
                                    +{post.tags.length - 3}
                                </span>
                            )}
                        </div>

                        {/* 日期 */}
                        <div className="text-white/60 text-sm">
                            {formatDate(post.createdAt)}
                        </div>
                    </div>

                    {/* 管理操作按钮 */}
                    {showActions && (
                        <div className="flex gap-2 mt-4 pt-4 border-t border-white/20">
                            <button
                                onClick={(e) => {
                                    e.stopPropagation();
                                    onEdit(post);
                                }}
                                className="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"
                            >
                                编辑
                            </button>
                            <button
                                onClick={(e) => {
                                    e.stopPropagation();
                                    if (confirm('确定要删除这篇文章吗？')) {
                                        onDelete(post.id);
                                    }
                                }}
                                className="flex-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"
                            >
                                删除
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        function DebugApp() {
            const [logs, setLogs] = React.useState([]);
            
            const addLog = (message, type = 'info') => {
                const timestamp = new Date().toLocaleTimeString();
                setLogs(prev => [...prev, { message, type, timestamp }]);
                console.log(`[${timestamp}] ${message}`);
            };

            const handleViewPost = (postId) => {
                addLog(`handleViewPost called with postId: ${postId}`, 'success');
                addLog('这里应该跳转到文章详情页面', 'info');
            };

            const handleEdit = (post) => {
                addLog(`编辑文章: ${post.title}`, 'info');
            };

            const handleDelete = (postId) => {
                addLog(`删除文章 ID: ${postId}`, 'warning');
            };

            React.useEffect(() => {
                addLog('调试页面加载完成', 'success');
                addLog('学习文章数据已加载', 'info');
            }, []);

            return (
                <div className="min-h-screen p-8">
                    <div className="max-w-6xl mx-auto">
                        <h1 className="text-3xl font-bold text-white mb-8 text-center">
                            学习页面PostCard点击调试
                        </h1>
                        
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            {/* PostCard测试区域 */}
                            <div>
                                <h2 className="text-xl font-semibold text-white mb-4">PostCard测试</h2>
                                <div className="space-y-4">
                                    {learningPosts.map(post => (
                                        <PostCard
                                            key={post.id}
                                            post={post}
                                            onClick={() => handleViewPost(post.id)}
                                            onEdit={handleEdit}
                                            onDelete={handleDelete}
                                            showActions={true}
                                        />
                                    ))}
                                </div>
                            </div>
                            
                            {/* 日志显示区域 */}
                            <div>
                                <h2 className="text-xl font-semibold text-white mb-4">调试日志</h2>
                                <div className="bg-black/30 rounded-lg p-4 h-96 overflow-y-auto">
                                    {logs.map((log, index) => (
                                        <div key={index} className={`mb-2 text-sm ${
                                            log.type === 'success' ? 'text-green-300' :
                                            log.type === 'warning' ? 'text-yellow-300' :
                                            log.type === 'error' ? 'text-red-300' :
                                            'text-white/80'
                                        }`}>
                                            <span className="text-white/60">[{log.timestamp}]</span> {log.message}
                                        </div>
                                    ))}
                                </div>
                                
                                <div className="mt-4 text-white/60 text-sm">
                                    <p>• 点击文章卡片应该触发handleViewPost函数</p>
                                    <p>• 点击编辑/删除按钮应该触发对应函数</p>
                                    <p>• 查看浏览器控制台获取更多调试信息</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DebugApp />);
    </script>
</body>
</html>