<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostCard 点击测试</title>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/react@18/umd/react.production.min.js"></script>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://resource.trickle.so/vendor_lib/unpkg/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(45deg, #3b82f6, #1e40af, #8b5cf6, #6366f1);
            min-height: 100vh;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        function PostCard({ post, onClick, showActions = false, onEdit, onDelete }) {
          const formatDate = (dateString) => {
            return new Date(dateString).toLocaleDateString('zh-CN', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            });
          };

          const getCategoryColor = (category) => {
            const colors = {
              '学习': 'from-blue-500 to-purple-600',
              '健身': 'from-green-500 to-teal-600',
              '生活': 'from-pink-500 to-rose-600',
              '摄影': 'from-yellow-500 to-orange-600'
            };
            return colors[category] || 'from-gray-500 to-gray-600';
          };

          return (
            <div 
              className="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300 transform hover:scale-105 cursor-pointer group"
              onClick={() => {
                console.log('PostCard clicked!', post);
                if (onClick) onClick();
              }}
            >
              <div>
                {/* 分类标签 */}
                <div className="flex items-center justify-between mb-4">
                  <span className={`px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r ${getCategoryColor(post.category)} text-white`}>
                    {post.category}
                  </span>
                  <span className="text-white/60 text-sm">{post.readTime}</span>
                </div>

                {/* 标题 */}
                <h3 className="text-xl font-bold text-white mb-3 group-hover:text-purple-300 transition-colors">
                  {post.title}
                </h3>

                {/* 摘要 */}
                <p className="text-white/80 mb-4 line-clamp-3">
                  {post.excerpt}
                </p>

                {/* 日期和标签 */}
                <div className="flex items-center justify-between text-sm text-white/60">
                  <span>{formatDate(post.date)}</span>
                  <div className="flex gap-2">
                    {post.tags && post.tags.slice(0, 2).map(tag => (
                      <span key={tag} className="px-2 py-1 bg-white/10 rounded-full text-xs">
                        {tag}
                      </span>
                    ))}
                  </div>
                </div>
              </div>

              {/* 管理操作按钮 */}
              {showActions && (
                <div className="flex gap-2 mt-4 pt-4 border-t border-white/20">
                  <button
                    onClick={(e) => {
                      e.stopPropagation();
                      console.log('Edit button clicked');
                      if (onEdit) onEdit(post);
                    }}
                    className="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"
                  >
                    编辑
                  </button>
                  <button
                    onClick={(e) => {
                      e.stopPropagation();
                      console.log('Delete button clicked');
                      if (confirm('确定要删除这篇文章吗？')) {
                        if (onDelete) onDelete(post.id);
                      }
                    }}
                    className="flex-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"
                  >
                    删除
                  </button>
                </div>
              )}
            </div>
          );
        }

        function TestApp() {
          const [clickCount, setClickCount] = React.useState(0);
          
          const testPost = {
            id: 1,
            title: '测试文章标题',
            excerpt: '这是一个测试文章的摘要内容，用来验证PostCard组件的点击功能是否正常工作。',
            category: '学习',
            date: '2025-08-07',
            readTime: '5分钟',
            tags: ['React', '测试']
          };

          const handleCardClick = () => {
            setClickCount(prev => prev + 1);
            alert(`卡片被点击了！点击次数: ${clickCount + 1}`);
          };

          const handleEdit = (post) => {
            alert('编辑按钮被点击');
          };

          const handleDelete = (postId) => {
            alert('删除按钮被点击');
          };

          return (
            <div className="max-w-md mx-auto">
              <h1 className="text-2xl font-bold text-white mb-6 text-center">
                PostCard 点击测试
              </h1>
              <p className="text-white/80 mb-4 text-center">
                点击次数: {clickCount}
              </p>
              <PostCard
                post={testPost}
                onClick={handleCardClick}
                onEdit={handleEdit}
                onDelete={handleDelete}
                showActions={true}
              />
              <div className="mt-6 text-white/60 text-sm text-center">
                <p>• 点击卡片任意位置应该触发点击事件</p>
                <p>• 点击编辑/删除按钮不应该触发卡片点击</p>
                <p>• 查看浏览器控制台获取详细日志</p>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TestApp />);
    </script>
</body>
</html>